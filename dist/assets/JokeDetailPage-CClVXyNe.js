import{e as J,b as h,u as P,r as f,j as a,S as b,f as N,c as v,g as x}from"./index-CHW_jxOE.js";import{g as j,b as A,c as B,d as y,e as w}from"./useJokes-mv1f9t73.js";import{J as C}from"./JokeCard-CMEdOhgc.js";import"./useMutation-BSQQP79B.js";import"./volume-2-BGdcmrs7.js";import"./thumbs-up-Uraezlc9.js";function $(){var p,r;const{slug:i}=J(),o=h(),{user:n}=P(),{data:t,isLoading:g,error:D}=j(i||""),{data:d=[]}=A((n==null?void 0:n.id)||"",t?[t.id]:[]),{data:c=[]}=B((n==null?void 0:n.id)||"",t?[t.id]:[]),k=y();w();const e=t?{...t,userVote:(d==null?void 0:d.find(s=>s.joke_id===t.id))||null,isFavorite:(c==null?void 0:c.some(s=>s.joke_id===t.id))||!1}:null;f.useEffect(()=>{i&&t===void 0||i&&t===null&&o("/")},[i,t,o]);const u=async(s,m)=>{var l;n&&((l=m==null?void 0:m.userVote)!=null&&l.vote_type)&&k.mutate({jokeId:s,userId:n.id,voteType:m.userVote.vote_type})};return D?a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/JokeDetailPage.tsx:71:6","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"71","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12","data-matrix-id":"src/pages/JokeDetailPage.tsx:72:8","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"72","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-6%20py-12%22%7D",children:a.jsx("div",{className:"text-center py-16","data-matrix-id":"src/pages/JokeDetailPage.tsx:73:10","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"73","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-16%22%7D",children:a.jsxs("div",{className:"mb-6","data-matrix-id":"src/pages/JokeDetailPage.tsx:74:12","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"74","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[a.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/pages/JokeDetailPage.tsx:75:14","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"75","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-red-100%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:a.jsx("span",{className:"text-4xl","data-matrix-id":"src/pages/JokeDetailPage.tsx:76:16","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"76","data-component-file":"JokeDetailPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%22%7D",children:"❌"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 heading","data-matrix-id":"src/pages/JokeDetailPage.tsx:78:14","data-matrix-name":"h3","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"78","data-component-file":"JokeDetailPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-foreground%20mb-2%20heading%22%7D",children:"Nie znaleziono dowcipu"}),a.jsx("p",{className:"text-content-muted mb-6","data-matrix-id":"src/pages/JokeDetailPage.tsx:81:14","data-matrix-name":"p","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"81","data-component-file":"JokeDetailPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%20mb-6%22%7D",children:"Ten dowcip nie istnieje lub został usunięty."}),a.jsx("button",{onClick:()=>o("/"),className:"btn-primary","data-matrix-id":"src/pages/JokeDetailPage.tsx:84:14","data-matrix-name":"button","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"84","data-component-file":"JokeDetailPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22btn-primary%22%7D",children:"Powrót do strony głównej"})]})})})}):g||!e?a.jsx("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center","data-matrix-id":"src/pages/JokeDetailPage.tsx:100:6","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"100","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%20flex%20items-center%20justify-center%22%7D",children:a.jsxs("div",{className:"text-center","data-matrix-id":"src/pages/JokeDetailPage.tsx:101:8","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"101","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary","data-matrix-id":"src/pages/JokeDetailPage.tsx:102:10","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"102","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-primary%22%7D"}),a.jsx("p",{className:"mt-4 text-muted-foreground subheading","data-matrix-id":"src/pages/JokeDetailPage.tsx:103:10","data-matrix-name":"p","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"103","data-component-file":"JokeDetailPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-muted-foreground%20subheading%22%7D",children:"Ładowanie dowcipu..."})]})}):a.jsxs(a.Fragment,{children:[e&&a.jsx(b,{title:`Dowcip: ${x(e.content,80)}`,description:`${x(e.content,160)} - dodany przez ${((p=e.profiles)==null?void 0:p.username)||"Anonim"}`,canonical:`/dowcip/${e.slug}`,ogType:"article",structuredData:[N(e),v([{name:"Strona główna",url:"https://jokebox.pl"},{name:"Dowcip",url:`https://jokebox.pl/dowcip/${e.slug}`}])],"data-matrix-id":"src/pages/JokeDetailPage.tsx:112:8","data-matrix-name":"SEO","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"112","data-component-file":"JokeDetailPage.tsx","data-component-name":"SEO","data-component-content":"%7B%22title%22%3A%22%5BTemplateLiteral%5D%22%2C%22description%22%3A%22%5BTemplateLiteral%5D%22%2C%22canonical%22%3A%22%5BTemplateLiteral%5D%22%2C%22ogType%22%3A%22article%22%2C%22structuredData%22%3A%5B%22%5BCallExpression%5D%22%2C%22%5BCallExpression%5D%22%5D%7D"}),a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/JokeDetailPage.tsx:126:6","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"126","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 sm:px-8 lg:px-12 py-12","data-matrix-id":"src/pages/JokeDetailPage.tsx:127:6","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"127","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-6%20sm%3Apx-8%20lg%3Apx-12%20py-12%22%7D",children:[a.jsxs("button",{onClick:()=>o(-1),className:"mb-6 text-primary hover:text-primary/80 flex items-center space-x-2","data-matrix-id":"src/pages/JokeDetailPage.tsx:128:8","data-matrix-name":"button","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"128","data-component-file":"JokeDetailPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22mb-6%20text-primary%20hover%3Atext-primary%2F80%20flex%20items-center%20space-x-2%22%7D",children:[a.jsx("span",{"data-matrix-id":"src/pages/JokeDetailPage.tsx:132:10","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"132","data-component-file":"JokeDetailPage.tsx","data-component-name":"span",children:"←"}),a.jsx("span",{"data-matrix-id":"src/pages/JokeDetailPage.tsx:133:10","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"133","data-component-file":"JokeDetailPage.tsx","data-component-name":"span",children:"Powrót"})]}),a.jsx(C,{joke:e,onVoteChange:u,"data-matrix-id":"src/pages/JokeDetailPage.tsx:136:8","data-matrix-name":"JokeCard","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"136","data-component-file":"JokeDetailPage.tsx","data-component-name":"JokeCard","data-component-content":"%7B%22joke%22%3A%22%5BIdentifier%5D%22%2C%22onVoteChange%22%3A%22%5BIdentifier%5D%22%7D"}),a.jsxs("div",{className:"mt-8 bg-card rounded-xl shadow-sm border border-border p-6","data-matrix-id":"src/pages/JokeDetailPage.tsx:138:8","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"138","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-8%20bg-card%20rounded-xl%20shadow-sm%20border%20border-border%20p-6%22%7D",children:[a.jsx("h3",{className:"text-xl font-bold text-foreground mb-4 heading","data-matrix-id":"src/pages/JokeDetailPage.tsx:139:10","data-matrix-name":"h3","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"139","data-component-file":"JokeDetailPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-foreground%20mb-4%20heading%22%7D",children:"O tym dowcipie"}),a.jsxs("div",{className:"space-y-2 text-content-muted","data-matrix-id":"src/pages/JokeDetailPage.tsx:142:10","data-matrix-name":"div","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"142","data-component-file":"JokeDetailPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-2%20text-content-muted%22%7D",children:[a.jsxs("p",{"data-matrix-id":"src/pages/JokeDetailPage.tsx:143:12","data-matrix-name":"p","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"143","data-component-file":"JokeDetailPage.tsx","data-component-name":"p",children:[a.jsx("span",{className:"font-semibold","data-matrix-id":"src/pages/JokeDetailPage.tsx:144:14","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"144","data-component-file":"JokeDetailPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%22%7D",children:"Dodane:"})," ",new Date(e.created_at).toLocaleDateString("pl-PL",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),a.jsxs("p",{"data-matrix-id":"src/pages/JokeDetailPage.tsx:153:12","data-matrix-name":"p","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"153","data-component-file":"JokeDetailPage.tsx","data-component-name":"p",children:[a.jsx("span",{className:"font-semibold","data-matrix-id":"src/pages/JokeDetailPage.tsx:154:14","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"154","data-component-file":"JokeDetailPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%22%7D",children:"Autor:"})," ",((r=e.profiles)==null?void 0:r.username)||"Anonim"]}),e.categories&&a.jsxs("p",{"data-matrix-id":"src/pages/JokeDetailPage.tsx:158:14","data-matrix-name":"p","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"158","data-component-file":"JokeDetailPage.tsx","data-component-name":"p",children:[a.jsx("span",{className:"font-semibold","data-matrix-id":"src/pages/JokeDetailPage.tsx:159:16","data-matrix-name":"span","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"159","data-component-file":"JokeDetailPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-semibold%22%7D",children:"Kategoria:"})," ",a.jsx("button",{onClick:()=>o(`/kategoria/${e.categories.slug}`),className:"text-primary hover:text-primary/80 hover:underline","data-matrix-id":"src/pages/JokeDetailPage.tsx:160:16","data-matrix-name":"button","data-component-path":"src/pages/JokeDetailPage.tsx","data-component-line":"160","data-component-file":"JokeDetailPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22text-primary%20hover%3Atext-primary%2F80%20hover%3Aunderline%22%7D",children:e.categories.name})]})]})]})]})})]})}export{$ as JokeDetailPage};

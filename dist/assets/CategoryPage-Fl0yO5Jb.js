import{e as S,b as _,u as F,r as u,j as a,S as I,h as z,c as J}from"./index-CHW_jxOE.js";import{h as L,a as V,b as O,c as $,d as M,e as T}from"./useJokes-mv1f9t73.js";import{J as W}from"./JokeCard-CMEdOhgc.js";import{P as R}from"./Pagination-CgNxuGqg.js";import"./useMutation-BSQQP79B.js";import"./volume-2-BGdcmrs7.js";import"./thumbs-up-Uraezlc9.js";import"./chevron-left-BVgj5tKE.js";import"./chevron-right-BjttR5_4.js";function aa(){var C,P;const{slug:d}=S(),i=_(),{user:o}=F(),[r,f]=u.useState(0),p=15,{data:t,isLoading:b,error:N}=L(d||""),{data:e,isLoading:l,error:v,refetch:j}=V({page:r,categoryId:t==null?void 0:t.id,limit:p,orderBy:"created_at",enabled:!!t}),y=((C=e==null?void 0:e.jokes)==null?void 0:C.map(n=>n.id))||[],{data:g=[]}=O((o==null?void 0:o.id)||"",y),{data:x=[]}=$((o==null?void 0:o.id)||"",y),B=M();T();const c=((P=e==null?void 0:e.jokes)==null?void 0:P.map(n=>({...n,userVote:(g==null?void 0:g.find(s=>s.joke_id===n.id))||null,isFavorite:(x==null?void 0:x.some(s=>s.joke_id===n.id))||!1})))||[],m=(e==null?void 0:e.totalCount)||0,A=(e==null?void 0:e.totalPages)||0,D=b||l,w=N||v,k=async(n,s)=>{var h;o&&((h=s==null?void 0:s.userVote)!=null&&h.vote_type)&&B.mutate({jokeId:n,userId:o.id,voteType:s.userVote.vote_type})},E=n=>{f(n)};return u.useEffect(()=>{d&&t===void 0||d&&t===null&&i("/")},[d,t,i]),w?a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/CategoryPage.tsx:95:6","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"95","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12","data-matrix-id":"src/pages/CategoryPage.tsx:96:8","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"96","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-6%20py-12%22%7D",children:a.jsx("div",{className:"text-center py-16","data-matrix-id":"src/pages/CategoryPage.tsx:97:10","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"97","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-16%22%7D",children:a.jsxs("div",{className:"mb-6","data-matrix-id":"src/pages/CategoryPage.tsx:98:12","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"98","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[a.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/pages/CategoryPage.tsx:99:14","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"99","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-red-100%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:a.jsx("span",{className:"text-4xl","data-matrix-id":"src/pages/CategoryPage.tsx:100:16","data-matrix-name":"span","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"100","data-component-file":"CategoryPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%22%7D",children:"❌"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 heading","data-matrix-id":"src/pages/CategoryPage.tsx:102:14","data-matrix-name":"h3","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"102","data-component-file":"CategoryPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-foreground%20mb-2%20heading%22%7D",children:"Wystąpił błąd"}),a.jsx("p",{className:"text-content-muted mb-6","data-matrix-id":"src/pages/CategoryPage.tsx:105:14","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"105","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%20mb-6%22%7D",children:"Nie udało się załadować kategorii. Spróbuj odświeżyć stronę."}),a.jsx("button",{onClick:()=>j(),className:"btn-primary","data-matrix-id":"src/pages/CategoryPage.tsx:108:14","data-matrix-name":"button","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"108","data-component-file":"CategoryPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22btn-primary%22%7D",children:"Odśwież"})]})})})}):D||!t?a.jsx("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center","data-matrix-id":"src/pages/CategoryPage.tsx:123:6","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"123","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%20flex%20items-center%20justify-center%22%7D",children:a.jsxs("div",{className:"text-center","data-matrix-id":"src/pages/CategoryPage.tsx:124:8","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"124","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary","data-matrix-id":"src/pages/CategoryPage.tsx:125:10","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"125","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-primary%22%7D"}),a.jsx("p",{className:"mt-4 text-content-muted subheading","data-matrix-id":"src/pages/CategoryPage.tsx:126:10","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"126","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-content-muted%20subheading%22%7D",children:"Ładowanie kategorii..."})]})}):a.jsxs(a.Fragment,{children:[t&&a.jsx(I,{title:`${t.name} - Dowcipy`,description:t.description||`Najlepsze dowcipy w kategorii ${t.name}. Odkryj śmieszne żarty na temat ${t.name}!`,canonical:`/kategoria/${t.slug}`,structuredData:[z({...t,joke_count:m}),J([{name:"Strona główna",url:"https://jokebox.pl"},{name:t.name,url:`https://jokebox.pl/kategoria/${t.slug}`}])],"data-matrix-id":"src/pages/CategoryPage.tsx:135:8","data-matrix-name":"SEO","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"135","data-component-file":"CategoryPage.tsx","data-component-name":"SEO","data-component-content":"%7B%22title%22%3A%22%5BTemplateLiteral%5D%22%2C%22description%22%3A%22%5BLogicalExpression%5D%22%2C%22canonical%22%3A%22%5BTemplateLiteral%5D%22%2C%22structuredData%22%3A%5B%22%5BCallExpression%5D%22%2C%22%5BCallExpression%5D%22%5D%7D"}),a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/CategoryPage.tsx:148:6","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"148","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-6 sm:px-8 lg:px-12 py-12","data-matrix-id":"src/pages/CategoryPage.tsx:149:6","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"149","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-6xl%20mx-auto%20px-6%20sm%3Apx-8%20lg%3Apx-12%20py-12%22%7D",children:[a.jsxs("button",{onClick:()=>i("/"),className:"mb-6 text-primary hover:text-primary/80 flex items-center space-x-2","data-matrix-id":"src/pages/CategoryPage.tsx:150:8","data-matrix-name":"button","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"150","data-component-file":"CategoryPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22mb-6%20text-primary%20hover%3Atext-primary%2F80%20flex%20items-center%20space-x-2%22%7D",children:[a.jsx("span",{"data-matrix-id":"src/pages/CategoryPage.tsx:154:10","data-matrix-name":"span","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"154","data-component-file":"CategoryPage.tsx","data-component-name":"span",children:"←"}),a.jsx("span",{"data-matrix-id":"src/pages/CategoryPage.tsx:155:10","data-matrix-name":"span","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"155","data-component-file":"CategoryPage.tsx","data-component-name":"span",children:"Powrót"})]}),a.jsxs("div",{className:"mb-8","data-matrix-id":"src/pages/CategoryPage.tsx:158:8","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"158","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-8%22%7D",children:[a.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2 heading","data-matrix-id":"src/pages/CategoryPage.tsx:159:10","data-matrix-name":"h1","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"159","data-component-file":"CategoryPage.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-bold%20text-foreground%20mb-2%20heading%22%7D",children:t.name}),t.description_seo&&a.jsx("p",{className:"text-content-muted","data-matrix-id":"src/pages/CategoryPage.tsx:163:12","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"163","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%22%7D",children:t.description_seo}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-2","data-matrix-id":"src/pages/CategoryPage.tsx:167:10","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"167","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-muted-foreground%20mt-2%22%7D",children:["Wyświetlono ",c.length," z ",m," dowcipów w tej kategorii"]})]}),a.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-8","data-matrix-id":"src/pages/CategoryPage.tsx:172:8","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"172","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-card%20rounded-xl%20shadow-sm%20border%20border-border%20p-8%22%7D",children:[c.length===0?a.jsx("div",{className:"text-center py-12","data-matrix-id":"src/pages/CategoryPage.tsx:174:12","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"174","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:a.jsxs("div",{className:"mb-6","data-matrix-id":"src/pages/CategoryPage.tsx:175:14","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"175","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[a.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/pages/CategoryPage.tsx:176:16","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"176","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-muted%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:a.jsx("span",{className:"text-4xl","data-matrix-id":"src/pages/CategoryPage.tsx:177:18","data-matrix-name":"span","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"177","data-component-file":"CategoryPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%22%7D",children:"😄"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 heading","data-matrix-id":"src/pages/CategoryPage.tsx:179:16","data-matrix-name":"h3","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"179","data-component-file":"CategoryPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-foreground%20mb-2%20heading%22%7D",children:"Brak dowcipów w tej kategorii"}),a.jsx("p",{className:"text-content-muted","data-matrix-id":"src/pages/CategoryPage.tsx:182:16","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"182","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%22%7D",children:"Bądź pierwszy i dodaj śmieszny dowcip!"})]})}):a.jsx("div",{className:"space-y-4","data-matrix-id":"src/pages/CategoryPage.tsx:188:12","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"188","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:c.map(n=>a.jsx(W,{joke:n,onVoteChange:k,"data-matrix-id":"src/pages/CategoryPage.tsx:190:16","data-matrix-name":"JokeCard","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"190","data-component-file":"CategoryPage.tsx","data-component-name":"JokeCard","data-component-content":"%7B%22joke%22%3A%22%5BIdentifier%5D%22%2C%22onVoteChange%22%3A%22%5BIdentifier%5D%22%7D"},n.id))}),c.length>0&&a.jsx("div",{className:"mt-8 flex justify-center items-center","data-matrix-id":"src/pages/CategoryPage.tsx:197:12","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"197","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-8%20flex%20justify-center%20items-center%22%7D",children:a.jsx(R,{currentPage:r,totalPages:A,onPageChange:E,loading:l,"data-matrix-id":"src/pages/CategoryPage.tsx:198:14","data-matrix-name":"Pagination","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"198","data-component-file":"CategoryPage.tsx","data-component-name":"Pagination","data-component-content":"%7B%22currentPage%22%3A%22%5BIdentifier%5D%22%2C%22totalPages%22%3A%22%5BIdentifier%5D%22%2C%22onPageChange%22%3A%22%5BIdentifier%5D%22%2C%22loading%22%3A%22%5BIdentifier%5D%22%7D"})}),m>0&&a.jsx("div",{className:"mt-4 text-center text-muted-foreground","data-matrix-id":"src/pages/CategoryPage.tsx:209:12","data-matrix-name":"div","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"209","data-component-file":"CategoryPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-4%20text-center%20text-muted-foreground%22%7D",children:a.jsxs("p",{className:"text-sm","data-matrix-id":"src/pages/CategoryPage.tsx:210:14","data-matrix-name":"p","data-component-path":"src/pages/CategoryPage.tsx","data-component-line":"210","data-component-file":"CategoryPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%22%7D",children:["Wyświetlono ",r*p+1,"-",Math.min((r+1)*p,m)," z ",m," dowcipów w kategorii ",t.name]})})]})]})})]})}export{aa as CategoryPage};

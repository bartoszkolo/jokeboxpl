import{d as f,u as v,r as N,j as a}from"./index-CHW_jxOE.js";import{a as y,b as A,c as B,d as w,e as j}from"./useJokes-mv1f9t73.js";import{J as D}from"./JokeCard-CMEdOhgc.js";import"./useMutation-BSQQP79B.js";import"./volume-2-BGdcmrs7.js";import"./thumbs-up-Uraezlc9.js";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=f("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function I(){var g;const{user:n}=v(),[o,d]=N.useState("all"),{data:s,isLoading:x,error:l,refetch:k}=y({page:0,categoryId:null,limit:50,orderBy:"score"}),r=((g=s==null?void 0:s.jokes)==null?void 0:g.map(e=>e.id))||[],{data:m=[]}=A((n==null?void 0:n.id)||"",r),{data:c=[]}=B((n==null?void 0:n.id)||"",r),h=w();j();const u=e=>{if(o==="all")return e;const t=new Date;let i;if(o==="week")i=new Date(t.getTime()-10080*60*1e3);else if(o==="month")i=new Date(t.getFullYear(),t.getMonth()-1,t.getDate());else return e;return e.filter(b=>new Date(b.created_at)>=i)},R=(s==null?void 0:s.jokes)||[],p=u(R).map(e=>({...e,userVote:(m==null?void 0:m.find(t=>t.joke_id===e.id))||null,isFavorite:(c==null?void 0:c.some(t=>t.joke_id===e.id))||!1})),P=async(e,t)=>{var i;n&&((i=t==null?void 0:t.userVote)!=null&&i.vote_type)&&h.mutate({jokeId:e,userId:n.id,voteType:t.userVote.vote_type})};return l?a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/RankingPage.tsx:87:6","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"87","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsx("div",{className:"max-w-4xl mx-auto px-6 py-12","data-matrix-id":"src/pages/RankingPage.tsx:88:8","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"88","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-4xl%20mx-auto%20px-6%20py-12%22%7D",children:a.jsx("div",{className:"text-center py-16","data-matrix-id":"src/pages/RankingPage.tsx:89:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"89","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-16%22%7D",children:a.jsxs("div",{className:"mb-6","data-matrix-id":"src/pages/RankingPage.tsx:90:12","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"90","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[a.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/pages/RankingPage.tsx:91:14","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"91","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-red-100%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:a.jsx("span",{className:"text-4xl","data-matrix-id":"src/pages/RankingPage.tsx:92:16","data-matrix-name":"span","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"92","data-component-file":"RankingPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%22%7D",children:"❌"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 heading","data-matrix-id":"src/pages/RankingPage.tsx:94:14","data-matrix-name":"h3","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"94","data-component-file":"RankingPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-foreground%20mb-2%20heading%22%7D",children:"Wystąpił błąd"}),a.jsx("p",{className:"text-content-muted mb-6","data-matrix-id":"src/pages/RankingPage.tsx:97:14","data-matrix-name":"p","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"97","data-component-file":"RankingPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%20mb-6%22%7D",children:"Nie udało się załadować rankingu. Spróbuj odświeżyć stronę."}),a.jsx("button",{onClick:()=>k(),className:"btn-primary","data-matrix-id":"src/pages/RankingPage.tsx:100:14","data-matrix-name":"button","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"100","data-component-file":"RankingPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22btn-primary%22%7D",children:"Odśwież"})]})})})}):a.jsx("div",{className:"min-h-screen bg-muted/30","data-matrix-id":"src/pages/RankingPage.tsx:114:4","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"114","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-muted%2F30%22%7D",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-6 sm:px-8 lg:px-12 py-12","data-matrix-id":"src/pages/RankingPage.tsx:115:6","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"115","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-6xl%20mx-auto%20px-6%20sm%3Apx-8%20lg%3Apx-12%20py-12%22%7D",children:[a.jsxs("div",{className:"mb-8","data-matrix-id":"src/pages/RankingPage.tsx:116:8","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"116","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-8%22%7D",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2","data-matrix-id":"src/pages/RankingPage.tsx:117:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"117","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20space-x-3%20mb-2%22%7D",children:[a.jsx(C,{className:"text-yellow-500",size:36,"data-matrix-id":"src/pages/RankingPage.tsx:118:12","data-matrix-name":"Trophy","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"118","data-component-file":"RankingPage.tsx","data-component-name":"Trophy","data-component-content":"%7B%22className%22%3A%22text-yellow-500%22%2C%22size%22%3A36%7D"}),a.jsx("h1",{className:"text-4xl font-bold text-gradient heading","data-matrix-id":"src/pages/RankingPage.tsx:119:12","data-matrix-name":"h1","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"119","data-component-file":"RankingPage.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-bold%20text-gradient%20heading%22%7D",children:"Ranking Dowcipów"})]}),a.jsx("p",{className:"text-content-muted subheading","data-matrix-id":"src/pages/RankingPage.tsx:123:10","data-matrix-name":"p","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"123","data-component-file":"RankingPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%20subheading%22%7D",children:"Najlepiej oceniane dowcipy w serwisie"})]}),a.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-8","data-matrix-id":"src/pages/RankingPage.tsx:128:8","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"128","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-card%20rounded-xl%20shadow-sm%20border%20border-border%20p-8%22%7D",children:[a.jsxs("div",{className:"mb-6 flex space-x-2","data-matrix-id":"src/pages/RankingPage.tsx:129:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"129","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%20flex%20space-x-2%22%7D",children:[a.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg transition ${o==="all"?"bg-primary text-primary-foreground":"bg-background text-foreground hover:bg-primary hover:text-primary-foreground border border-border"}`,"data-matrix-id":"src/pages/RankingPage.tsx:130:10","data-matrix-name":"button","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"130","data-component-file":"RankingPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Wszystkie czasy"}),a.jsx("button",{onClick:()=>d("month"),className:`px-4 py-2 rounded-lg transition ${o==="month"?"bg-primary text-primary-foreground":"bg-background text-foreground hover:bg-primary hover:text-primary-foreground border border-border"}`,"data-matrix-id":"src/pages/RankingPage.tsx:140:10","data-matrix-name":"button","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"140","data-component-file":"RankingPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Ostatni miesiąc"}),a.jsx("button",{onClick:()=>d("week"),className:`px-4 py-2 rounded-lg transition ${o==="week"?"bg-primary text-primary-foreground":"bg-background text-foreground hover:bg-primary hover:text-primary-foreground border border-border"}`,"data-matrix-id":"src/pages/RankingPage.tsx:150:10","data-matrix-name":"button","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"150","data-component-file":"RankingPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Ostatni tydzień"})]}),x?a.jsxs("div",{className:"text-center py-12","data-matrix-id":"src/pages/RankingPage.tsx:163:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"163","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primary","data-matrix-id":"src/pages/RankingPage.tsx:164:12","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"164","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-primary%22%7D"}),a.jsx("p",{className:"mt-4 text-content-muted subheading","data-matrix-id":"src/pages/RankingPage.tsx:165:12","data-matrix-name":"p","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"165","data-component-file":"RankingPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-content-muted%20subheading%22%7D",children:"Ładowanie rankingu..."})]}):p.length===0?a.jsx("div",{className:"text-center py-12","data-matrix-id":"src/pages/RankingPage.tsx:168:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"168","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:a.jsxs("div",{className:"mb-6","data-matrix-id":"src/pages/RankingPage.tsx:169:12","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"169","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[a.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-4","data-matrix-id":"src/pages/RankingPage.tsx:170:14","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"170","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-24%20h-24%20bg-muted%20rounded-full%20flex%20items-center%20justify-center%20mx-auto%20mb-4%22%7D",children:a.jsx("span",{className:"text-4xl","data-matrix-id":"src/pages/RankingPage.tsx:171:16","data-matrix-name":"span","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"171","data-component-file":"RankingPage.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-4xl%22%7D",children:"📊"})}),a.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 heading","data-matrix-id":"src/pages/RankingPage.tsx:173:14","data-matrix-name":"h3","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"173","data-component-file":"RankingPage.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-semibold%20text-foreground%20mb-2%20heading%22%7D",children:"Brak dowcipów w tym okresie"}),a.jsx("p",{className:"text-content-muted","data-matrix-id":"src/pages/RankingPage.tsx:176:14","data-matrix-name":"p","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"176","data-component-file":"RankingPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-content-muted%22%7D",children:"Spróbuj wybrać inny zakres czasowy"})]})}):a.jsx("div",{className:"space-y-4","data-matrix-id":"src/pages/RankingPage.tsx:182:10","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"182","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:p.map((e,t)=>a.jsxs("div",{className:"relative","data-matrix-id":"src/pages/RankingPage.tsx:184:14","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"184","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22relative%22%7D",children:[a.jsx("div",{className:"absolute left-0 top-0 -ml-12 mt-6","data-matrix-id":"src/pages/RankingPage.tsx:185:16","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"185","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22absolute%20left-0%20top-0%20-ml-12%20mt-6%22%7D",children:a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg shadow-md ${t===0?"bg-yellow-400 text-yellow-900":t===1?"bg-gray-300 text-gray-800":t===2?"bg-orange-400 text-orange-900":"bg-muted text-muted-foreground"}`,"data-matrix-id":"src/pages/RankingPage.tsx:186:18","data-matrix-name":"div","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"186","data-component-file":"RankingPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:t+1})}),a.jsx(D,{joke:e,onVoteChange:P,"data-matrix-id":"src/pages/RankingPage.tsx:195:16","data-matrix-name":"JokeCard","data-component-path":"src/pages/RankingPage.tsx","data-component-line":"195","data-component-file":"RankingPage.tsx","data-component-name":"JokeCard","data-component-content":"%7B%22joke%22%3A%22%5BIdentifier%5D%22%2C%22onVoteChange%22%3A%22%5BIdentifier%5D%22%7D"})]},e.id))})]})]})})}export{I as RankingPage};
